import{S as C,i as O,s as P,k as q,f as E,d as h,e as v,j as A,t as N,c as p,a as g,l as w,g as V,b as m,H as f,L as F,M as Q,I as k,N as L,O as T,u as U,P as I,h as H,Q as z,K as B}from"./vendor-efad3a29.js";/* empty css                                           */function J(i,e,a){const l=i.slice();return l[5]=e[a],l}function G(i){let e,a,l=i[5].data+"",t,s;return{c(){e=v("div"),a=v("span"),t=N(l),this.h()},l(n){e=p(n,"DIV",{class:!0});var c=g(e);a=p(c,"SPAN",{});var d=g(a);t=V(d,l),d.forEach(h),c.forEach(h),this.h()},h(){m(e,"class",s=""+(I(i[5].type)+" svelte-16ca9vt"))},m(n,c){E(n,e,c),f(e,a),f(a,t)},p(n,c){c&1&&l!==(l=n[5].data+"")&&H(t,l),c&1&&s!==(s=""+(I(n[5].type)+" svelte-16ca9vt"))&&m(e,"class",s)},d(n){n&&h(e)}}}function R(i){let e,a,l=i[5].data+"",t,s;return{c(){e=v("div"),a=v("span"),t=N(l),this.h()},l(n){e=p(n,"DIV",{class:!0});var c=g(e);a=p(c,"SPAN",{});var d=g(a);t=V(d,l),d.forEach(h),c.forEach(h),this.h()},h(){m(e,"class",s=""+(I(i[5].type)+" svelte-16ca9vt"))},m(n,c){E(n,e,c),f(e,a),f(a,t)},p(n,c){c&1&&l!==(l=n[5].data+"")&&H(t,l),c&1&&s!==(s=""+(I(n[5].type)+" svelte-16ca9vt"))&&m(e,"class",s)},d(n){n&&h(e)}}}function K(i){let e;function a(s,n){return s[5].type==="incoming"?R:G}let l=a(i),t=l(i);return{c(){t.c(),e=q()},l(s){t.l(s),e=q()},m(s,n){t.m(s,n),E(s,e,n)},p(s,n){l===(l=a(s))&&t?t.p(s,n):(t.d(1),t=l(s),t&&(t.c(),t.m(e.parentNode,e)))},d(s){t.d(s),s&&h(e)}}}function W(i){let e,a,l,t,s,n,c,d,S,M,b=i[0],u=[];for(let o=0;o<b.length;o+=1)u[o]=K(J(i,b,o));return{c(){e=v("main"),a=v("div");for(let o=0;o<u.length;o+=1)u[o].c();l=A(),t=v("div"),s=v("input"),n=A(),c=v("div"),d=N("Send"),this.h()},l(o){e=p(o,"MAIN",{class:!0});var _=g(e);a=p(_,"DIV",{class:!0});var r=g(a);for(let D=0;D<u.length;D+=1)u[D].l(r);r.forEach(h),l=w(_),t=p(_,"DIV",{class:!0});var y=g(t);s=p(y,"INPUT",{type:!0,class:!0}),n=w(y),c=p(y,"DIV",{class:!0});var j=g(c);d=V(j,"Send"),j.forEach(h),y.forEach(h),_.forEach(h),this.h()},h(){m(a,"class","messages svelte-16ca9vt"),m(s,"type","text"),m(s,"class","svelte-16ca9vt"),m(c,"class","btn svelte-16ca9vt"),m(t,"class","input svelte-16ca9vt"),m(e,"class","svelte-16ca9vt")},m(o,_){E(o,e,_),f(e,a);for(let r=0;r<u.length;r+=1)u[r].m(a,null);f(e,l),f(e,t),f(t,s),F(s,i[1]),f(t,n),f(t,c),f(c,d),S||(M=[Q(s,"input",i[4]),Q(c,"click",i[2])],S=!0)},p(o,[_]){if(_&1){b=o[0];let r;for(r=0;r<b.length;r+=1){const y=J(o,b,r);u[r]?u[r].p(y,_):(u[r]=K(y),u[r].c(),u[r].m(a,null))}for(;r<u.length;r+=1)u[r].d(1);u.length=b.length}_&2&&s.value!==o[1]&&F(s,o[1])},i:k,o:k,d(o){o&&h(e),L(u,o),S=!1,T(M)}}}function X(i,e,a){let{channel:l}=e,t=[],s="";U(()=>a(3,l.onmessage=({data:d})=>a(0,t=[...t,{type:"incoming",data:d}]),l));function n(){s&&(a(0,t=[...t,{type:"outgoing",data:s}]),l.send(s),a(1,s=""))}function c(){s=this.value,a(1,s)}return i.$$set=d=>{"channel"in d&&a(3,l=d.channel)},[t,s,n,l,c]}class ee extends C{constructor(e){super();O(this,e,X,W,P,{channel:3})}}function Y(i){let e;return{c(){e=v("video"),this.h()},l(a){e=p(a,"VIDEO",{}),g(e).forEach(h),this.h()},h(){e.autoplay=!0},m(a,l){E(a,e,l),i[2](e)},p:k,i:k,o:k,d(a){a&&h(e),i[2](null)}}}function Z(i,e,a){let{type:l}=e,t;U(()=>{navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}).then(n=>{a(0,t.srcObject=n,t),new z().decodeFromVideo(t).then(d=>{dispatchEvent(new CustomEvent("scan",{detail:{sdp:{sdp:d.data,type:l}}})),console.log(JSON.parse(d.data))})}).catch(n=>{console.error(n),alert(n)})});function s(n){B[n?"unshift":"push"](()=>{t=n,a(0,t)})}return i.$$set=n=>{"type"in n&&a(1,l=n.type)},[t,l,s]}class te extends C{constructor(e){super();O(this,e,Z,Y,P,{type:1})}}export{ee as C,te as S};
