import{S as N,i as V,s as C,k as q,f as k,d as h,e as f,j as O,t as M,c as _,a as g,l as P,g as w,b as v,H as p,J as Q,K as F,I as y,L as T,M as z,u as J,N as S,h as L,Q as B,O as U,P as G}from"./vendor-3d38fcf1.js";/* empty css                                           */function H(c,e,t){const l=c.slice();return l[5]=e[t],l}function R(c){let e,t,l=c[5].data+"",s,a;return{c(){e=f("div"),t=f("span"),s=M(l),this.h()},l(n){e=_(n,"DIV",{class:!0});var i=g(e);t=_(i,"SPAN",{});var d=g(t);s=w(d,l),d.forEach(h),i.forEach(h),this.h()},h(){v(e,"class",a=""+(S(c[5].type)+" svelte-16ca9vt"))},m(n,i){k(n,e,i),p(e,t),p(t,s)},p(n,i){i&1&&l!==(l=n[5].data+"")&&L(s,l),i&1&&a!==(a=""+(S(n[5].type)+" svelte-16ca9vt"))&&v(e,"class",a)},d(n){n&&h(e)}}}function W(c){let e,t,l=c[5].data+"",s,a;return{c(){e=f("div"),t=f("span"),s=M(l),this.h()},l(n){e=_(n,"DIV",{class:!0});var i=g(e);t=_(i,"SPAN",{});var d=g(t);s=w(d,l),d.forEach(h),i.forEach(h),this.h()},h(){v(e,"class",a=""+(S(c[5].type)+" svelte-16ca9vt"))},m(n,i){k(n,e,i),p(e,t),p(t,s)},p(n,i){i&1&&l!==(l=n[5].data+"")&&L(s,l),i&1&&a!==(a=""+(S(n[5].type)+" svelte-16ca9vt"))&&v(e,"class",a)},d(n){n&&h(e)}}}function K(c){let e;function t(a,n){return a[5].type==="incoming"?W:R}let l=t(c),s=l(c);return{c(){s.c(),e=q()},l(a){s.l(a),e=q()},m(a,n){s.m(a,n),k(a,e,n)},p(a,n){l===(l=t(a))&&s?s.p(a,n):(s.d(1),s=l(a),s&&(s.c(),s.m(e.parentNode,e)))},d(a){s.d(a),a&&h(e)}}}function X(c){let e,t,l,s,a,n,i,d,I,A,E=c[0],u=[];for(let r=0;r<E.length;r+=1)u[r]=K(H(c,E,r));return{c(){e=f("main"),t=f("div");for(let r=0;r<u.length;r+=1)u[r].c();l=O(),s=f("div"),a=f("input"),n=O(),i=f("div"),d=M("Send"),this.h()},l(r){e=_(r,"MAIN",{class:!0});var m=g(e);t=_(m,"DIV",{class:!0});var o=g(t);for(let D=0;D<u.length;D+=1)u[D].l(o);o.forEach(h),l=P(m),s=_(m,"DIV",{class:!0});var b=g(s);a=_(b,"INPUT",{type:!0,class:!0}),n=P(b),i=_(b,"DIV",{class:!0});var j=g(i);d=w(j,"Send"),j.forEach(h),b.forEach(h),m.forEach(h),this.h()},h(){v(t,"class","messages svelte-16ca9vt"),v(a,"type","text"),v(a,"class","svelte-16ca9vt"),v(i,"class","btn svelte-16ca9vt"),v(s,"class","input svelte-16ca9vt"),v(e,"class","svelte-16ca9vt")},m(r,m){k(r,e,m),p(e,t);for(let o=0;o<u.length;o+=1)u[o].m(t,null);p(e,l),p(e,s),p(s,a),Q(a,c[1]),p(s,n),p(s,i),p(i,d),I||(A=[F(a,"input",c[4]),F(i,"click",c[2])],I=!0)},p(r,[m]){if(m&1){E=r[0];let o;for(o=0;o<E.length;o+=1){const b=H(r,E,o);u[o]?u[o].p(b,m):(u[o]=K(b),u[o].c(),u[o].m(t,null))}for(;o<u.length;o+=1)u[o].d(1);u.length=E.length}m&2&&a.value!==r[1]&&Q(a,r[1])},i:y,o:y,d(r){r&&h(e),T(u,r),I=!1,z(A)}}}function Y(c,e,t){let{channel:l}=e,s=[],a="";J(()=>t(3,l.onmessage=({data:d})=>t(0,s=[...s,{type:"incoming",data:d}]),l));function n(){a&&(t(0,s=[...s,{type:"outgoing",data:a}]),l.send(a),t(1,a=""))}function i(){a=this.value,t(1,a)}return c.$$set=d=>{"channel"in d&&t(3,l=d.channel)},[s,a,n,l,i]}class ae extends N{constructor(e){super();V(this,e,Y,X,C,{channel:3})}}function Z(c){let e;return{c(){e=f("video"),this.h()},l(t){e=_(t,"VIDEO",{}),g(e).forEach(h),this.h()},h(){e.autoplay=!0},m(t,l){k(t,e,l),c[2](e)},p:y,i:y,o:y,d(t){t&&h(e),c[2](null)}}}function x(c,e,t){let{type:l}=e,s;J(()=>{navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}).then(n=>{t(0,s.srcObject=n,s),new B().decodeFromVideo(s).then(d=>{dispatchEvent(new CustomEvent("scan",{detail:{sdp:{sdp:d.data,type:l}}})),console.log(JSON.parse(d.data))})}).catch(n=>{console.error(n)})});function a(n){U[n?"unshift":"push"](()=>{s=n,t(0,s)})}return c.$$set=n=>{"type"in n&&t(1,l=n.type)},[s,l,a]}class ne extends N{constructor(e){super();V(this,e,x,Z,C,{type:1})}}function $(c){let e;return{c(){e=f("canvas"),this.h()},l(t){e=_(t,"CANVAS",{class:!0}),g(e).forEach(h),this.h()},h(){v(e,"class","svelte-ewlrv4")},m(t,l){k(t,e,l),c[2](e)},p:y,i:y,o:y,d(t){t&&h(e),c[2](null)}}}function ee(c,e,t){let{data:l}=e,s;function a(n){U[n?"unshift":"push"](()=>{s=n,t(0,s)})}return c.$$set=n=>{"data"in n&&t(1,l=n.data)},c.$$.update=()=>{c.$$.dirty&3&&l&&G.toCanvas(s,l,{margin:2,errorCorrectionLevel:"low"})},[s,l,a]}class le extends N{constructor(e){super();V(this,e,ee,$,C,{data:1})}}export{ae as C,le as Q,ne as S};
