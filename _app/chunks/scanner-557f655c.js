import{S as j,i as C,s as P,k as q,f as E,d as h,e as _,j as A,t as N,c as p,a as g,l as w,g as V,b as m,H as f,L as F,M as J,I as k,N as L,O as T,u as Q,P as S,h as U,Q as z,K as B}from"./vendor-efad3a29.js";/* empty css                                           */function H(i,e,s){const a=i.slice();return a[5]=e[s],a}function G(i){let e,s,a=i[5].data+"",l,t;return{c(){e=_("div"),s=_("span"),l=N(a),this.h()},l(n){e=p(n,"DIV",{class:!0});var c=g(e);s=p(c,"SPAN",{});var u=g(s);l=V(u,a),u.forEach(h),c.forEach(h),this.h()},h(){m(e,"class",t=""+(S(i[5].type)+" svelte-16ca9vt"))},m(n,c){E(n,e,c),f(e,s),f(s,l)},p(n,c){c&1&&a!==(a=n[5].data+"")&&U(l,a),c&1&&t!==(t=""+(S(n[5].type)+" svelte-16ca9vt"))&&m(e,"class",t)},d(n){n&&h(e)}}}function R(i){let e,s,a=i[5].data+"",l,t;return{c(){e=_("div"),s=_("span"),l=N(a),this.h()},l(n){e=p(n,"DIV",{class:!0});var c=g(e);s=p(c,"SPAN",{});var u=g(s);l=V(u,a),u.forEach(h),c.forEach(h),this.h()},h(){m(e,"class",t=""+(S(i[5].type)+" svelte-16ca9vt"))},m(n,c){E(n,e,c),f(e,s),f(s,l)},p(n,c){c&1&&a!==(a=n[5].data+"")&&U(l,a),c&1&&t!==(t=""+(S(n[5].type)+" svelte-16ca9vt"))&&m(e,"class",t)},d(n){n&&h(e)}}}function K(i){let e;function s(t,n){return t[5].type==="incoming"?R:G}let a=s(i),l=a(i);return{c(){l.c(),e=q()},l(t){l.l(t),e=q()},m(t,n){l.m(t,n),E(t,e,n)},p(t,n){a===(a=s(t))&&l?l.p(t,n):(l.d(1),l=a(t),l&&(l.c(),l.m(e.parentNode,e)))},d(t){l.d(t),t&&h(e)}}}function W(i){let e,s,a,l,t,n,c,u,I,M,b=i[0],d=[];for(let o=0;o<b.length;o+=1)d[o]=K(H(i,b,o));return{c(){e=_("main"),s=_("div");for(let o=0;o<d.length;o+=1)d[o].c();a=A(),l=_("div"),t=_("input"),n=A(),c=_("div"),u=N("Send"),this.h()},l(o){e=p(o,"MAIN",{class:!0});var v=g(e);s=p(v,"DIV",{class:!0});var r=g(s);for(let D=0;D<d.length;D+=1)d[D].l(r);r.forEach(h),a=w(v),l=p(v,"DIV",{class:!0});var y=g(l);t=p(y,"INPUT",{type:!0,class:!0}),n=w(y),c=p(y,"DIV",{class:!0});var O=g(c);u=V(O,"Send"),O.forEach(h),y.forEach(h),v.forEach(h),this.h()},h(){m(s,"class","messages svelte-16ca9vt"),m(t,"type","text"),m(t,"class","svelte-16ca9vt"),m(c,"class","btn svelte-16ca9vt"),m(l,"class","input svelte-16ca9vt"),m(e,"class","svelte-16ca9vt")},m(o,v){E(o,e,v),f(e,s);for(let r=0;r<d.length;r+=1)d[r].m(s,null);f(e,a),f(e,l),f(l,t),F(t,i[1]),f(l,n),f(l,c),f(c,u),I||(M=[J(t,"input",i[4]),J(c,"click",i[2])],I=!0)},p(o,[v]){if(v&1){b=o[0];let r;for(r=0;r<b.length;r+=1){const y=H(o,b,r);d[r]?d[r].p(y,v):(d[r]=K(y),d[r].c(),d[r].m(s,null))}for(;r<d.length;r+=1)d[r].d(1);d.length=b.length}v&2&&t.value!==o[1]&&F(t,o[1])},i:k,o:k,d(o){o&&h(e),L(d,o),I=!1,T(M)}}}function X(i,e,s){let{channel:a}=e,l=[],t="";Q(()=>s(3,a.onmessage=({data:u})=>s(0,l=[...l,{type:"incoming",data:u}]),a));function n(){t&&(s(0,l=[...l,{type:"outgoing",data:t}]),a.send(t))}function c(){t=this.value,s(1,t)}return i.$$set=u=>{"channel"in u&&s(3,a=u.channel)},[l,t,n,a,c]}class ee extends j{constructor(e){super();C(this,e,X,W,P,{channel:3})}}function Y(i){let e;return{c(){e=_("video"),this.h()},l(s){e=p(s,"VIDEO",{}),g(e).forEach(h),this.h()},h(){e.autoplay=!0},m(s,a){E(s,e,a),i[1](e)},p:k,i:k,o:k,d(s){s&&h(e),i[1](null)}}}function Z(i,e,s){let a;Q(()=>{navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}).then(t=>{s(0,a.srcObject=t,a),new z().decodeFromVideo(a).then(c=>{dispatchEvent(new CustomEvent("scan",{detail:{sdp:JSON.parse(c.data)}})),console.log(JSON.parse(c.data))})}).catch(t=>{console.error(t),alert(t)})});function l(t){B[t?"unshift":"push"](()=>{a=t,s(0,a)})}return[a,l]}class te extends j{constructor(e){super();C(this,e,Z,Y,P,{})}}export{ee as C,te as S};
