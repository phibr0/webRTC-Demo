import{S as V,i as A,s as M,k as P,f as g,d as i,e as p,j as q,t as S,c as v,a as b,l as N,g as w,b as m,H as k,J as T,K as j,I as h,N as Y,M as x,u as F,O as L,h as U,Q as ee,P as K,T as te,U as Q,V as se,p as D,n as $,m as ae,o as le,L as B,v as G,w as H,x as J,A as W,W as ne}from"./vendor-3dd79ec9.js";function Z(r,e,l){const t=r.slice();return t[5]=e[l],t}function ce(r){let e,l,t=r[5].data+"",s,a;return{c(){e=p("div"),l=p("span"),s=S(t),this.h()},l(n){e=v(n,"DIV",{class:!0});var o=b(e);l=v(o,"SPAN",{});var d=b(l);s=w(d,t),d.forEach(i),o.forEach(i),this.h()},h(){m(e,"class",a=""+(L(r[5].type)+" svelte-16ca9vt"))},m(n,o){g(n,e,o),k(e,l),k(l,s)},p(n,o){o&1&&t!==(t=n[5].data+"")&&U(s,t),o&1&&a!==(a=""+(L(n[5].type)+" svelte-16ca9vt"))&&m(e,"class",a)},d(n){n&&i(e)}}}function re(r){let e,l,t=r[5].data+"",s,a;return{c(){e=p("div"),l=p("span"),s=S(t),this.h()},l(n){e=v(n,"DIV",{class:!0});var o=b(e);l=v(o,"SPAN",{});var d=b(l);s=w(d,t),d.forEach(i),o.forEach(i),this.h()},h(){m(e,"class",a=""+(L(r[5].type)+" svelte-16ca9vt"))},m(n,o){g(n,e,o),k(e,l),k(l,s)},p(n,o){o&1&&t!==(t=n[5].data+"")&&U(s,t),o&1&&a!==(a=""+(L(n[5].type)+" svelte-16ca9vt"))&&m(e,"class",a)},d(n){n&&i(e)}}}function R(r){let e;function l(a,n){return a[5].type==="incoming"?re:ce}let t=l(r),s=t(r);return{c(){s.c(),e=P()},l(a){s.l(a),e=P()},m(a,n){s.m(a,n),g(a,e,n)},p(a,n){t===(t=l(a))&&s?s.p(a,n):(s.d(1),s=t(a),s&&(s.c(),s.m(e.parentNode,e)))},d(a){s.d(a),a&&i(e)}}}function oe(r){let e,l,t,s,a,n,o,d,y,I,E=r[0],_=[];for(let c=0;c<E.length;c+=1)_[c]=R(Z(r,E,c));return{c(){e=p("main"),l=p("div");for(let c=0;c<_.length;c+=1)_[c].c();t=q(),s=p("div"),a=p("input"),n=q(),o=p("div"),d=S("Send"),this.h()},l(c){e=v(c,"MAIN",{class:!0});var f=b(e);l=v(f,"DIV",{class:!0});var u=b(l);for(let O=0;O<_.length;O+=1)_[O].l(u);u.forEach(i),t=N(f),s=v(f,"DIV",{class:!0});var C=b(s);a=v(C,"INPUT",{type:!0,class:!0}),n=N(C),o=v(C,"DIV",{class:!0});var z=b(o);d=w(z,"Send"),z.forEach(i),C.forEach(i),f.forEach(i),this.h()},h(){m(l,"class","messages svelte-16ca9vt"),m(a,"type","text"),m(a,"class","svelte-16ca9vt"),m(o,"class","btn svelte-16ca9vt"),m(s,"class","input svelte-16ca9vt"),m(e,"class","svelte-16ca9vt")},m(c,f){g(c,e,f),k(e,l);for(let u=0;u<_.length;u+=1)_[u].m(l,null);k(e,t),k(e,s),k(s,a),T(a,r[1]),k(s,n),k(s,o),k(o,d),y||(I=[j(a,"input",r[4]),j(o,"click",r[2])],y=!0)},p(c,[f]){if(f&1){E=c[0];let u;for(u=0;u<E.length;u+=1){const C=Z(c,E,u);_[u]?_[u].p(C,f):(_[u]=R(C),_[u].c(),_[u].m(l,null))}for(;u<_.length;u+=1)_[u].d(1);_.length=E.length}f&2&&a.value!==c[1]&&T(a,c[1])},i:h,o:h,d(c){c&&i(e),Y(_,c),y=!1,x(I)}}}function ie(r,e,l){let{channel:t}=e,s=[],a="";F(()=>l(3,t.onmessage=({data:d})=>l(0,s=[...s,{type:"incoming",data:d}]),t));function n(){a&&(l(0,s=[...s,{type:"outgoing",data:a}]),t.send(a),l(1,a=""))}function o(){a=this.value,l(1,a)}return r.$$set=d=>{"channel"in d&&l(3,t=d.channel)},[s,a,n,t,o]}class ye extends V{constructor(e){super();A(this,e,ie,oe,M,{channel:3})}}function ue(r){let e;return{c(){e=p("video"),this.h()},l(l){e=v(l,"VIDEO",{}),b(e).forEach(i),this.h()},h(){e.autoplay=!0},m(l,t){g(l,e,t),r[1](e)},p:h,i:h,o:h,d(l){l&&i(e),r[1](null)}}}function fe(r,e,l){let t;F(()=>{navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}).then(a=>{l(0,t.srcObject=a,t),new ee().decodeFromVideo(t).then(o=>{dispatchEvent(new CustomEvent("scan",{detail:{data:o.data}}))})}).catch(a=>{console.error(a)})});function s(a){K[a?"unshift":"push"](()=>{t=a,l(0,t)})}return[t,s]}class Ee extends V{constructor(e){super();A(this,e,fe,ue,M,{})}}function _e(r){let e;return{c(){e=p("canvas"),this.h()},l(l){e=v(l,"CANVAS",{class:!0}),b(e).forEach(i),this.h()},h(){m(e,"class","svelte-ewlrv4")},m(l,t){g(l,e,t),r[2](e)},p:h,i:h,o:h,d(l){l&&i(e),r[2](null)}}}function de(r,e,l){let{data:t}=e,s;function a(n){K[n?"unshift":"push"](()=>{s=n,l(0,s)})}return r.$$set=n=>{"data"in n&&l(1,t=n.data)},r.$$.update=()=>{r.$$.dirty&3&&t&&te.toCanvas(s,t,{margin:2,errorCorrectionLevel:"low"})},[s,t,a]}class he extends V{constructor(e){super();A(this,e,de,_e,M,{data:1})}}function X(r){let e,l,t,s={ctx:r,current:null,token:null,hasCatch:!1,pending:me,then:ve,catch:pe,value:1,blocks:[,,,]};return Q(l=r[0],s),{c(){e=P(),s.block.c()},l(a){e=P(),s.block.l(a)},m(a,n){g(a,e,n),s.block.m(a,s.anchor=n),s.mount=()=>e.parentNode,s.anchor=e,t=!0},p(a,n){r=a,s.ctx=r,n&1&&l!==(l=r[0])&&Q(l,s)||se(s,r,n)},i(a){t||(D(s.block),t=!0)},o(a){for(let n=0;n<3;n+=1){const o=s.blocks[n];$(o)}t=!1},d(a){a&&i(e),s.block.d(a),s.token=null,s=null}}}function pe(r){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function ve(r){let e,l,t,s,a,n,o,d,y,I=B.compressToBase64(r[1].sdp)+"",E,_;return s=new he({props:{data:r[1].sdp}}),{c(){e=p("p"),l=S("Let the other User scan this Code:"),t=q(),G(s.$$.fragment),a=q(),n=p("p"),o=S("or share the following Key:"),d=q(),y=p("code"),E=S(I),this.h()},l(c){e=v(c,"P",{class:!0});var f=b(e);l=w(f,"Let the other User scan this Code:"),f.forEach(i),t=N(c),H(s.$$.fragment,c),a=N(c),n=v(c,"P",{class:!0});var u=b(n);o=w(u,"or share the following Key:"),u.forEach(i),d=N(c),y=v(c,"CODE",{class:!0});var C=b(y);E=w(C,I),C.forEach(i),this.h()},h(){m(e,"class","svelte-7zcqgs"),m(n,"class","svelte-7zcqgs"),m(y,"class","svelte-7zcqgs")},m(c,f){g(c,e,f),k(e,l),g(c,t,f),J(s,c,f),g(c,a,f),g(c,n,f),k(n,o),g(c,d,f),g(c,y,f),k(y,E),_=!0},p(c,f){const u={};f&1&&(u.data=c[1].sdp),s.$set(u),(!_||f&1)&&I!==(I=B.compressToBase64(c[1].sdp)+"")&&U(E,I)},i(c){_||(D(s.$$.fragment,c),_=!0)},o(c){$(s.$$.fragment,c),_=!1},d(c){c&&i(e),c&&i(t),W(s,c),c&&i(a),c&&i(n),c&&i(d),c&&i(y)}}}function me(r){let e,l;return e=new ne({props:{color:"#fff"}}),{c(){G(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,s){J(e,t,s),l=!0},p:h,i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){W(e,t)}}}function ge(r){let e,l,t=r[0]&&X(r);return{c(){e=p("main"),t&&t.c(),this.h()},l(s){e=v(s,"MAIN",{class:!0});var a=b(e);t&&t.l(a),a.forEach(i),this.h()},h(){m(e,"class","svelte-7zcqgs")},m(s,a){g(s,e,a),t&&t.m(e,null),l=!0},p(s,[a]){s[0]?t?(t.p(s,a),a&1&&D(t,1)):(t=X(s),t.c(),D(t,1),t.m(e,null)):t&&(ae(),$(t,1,1,()=>{t=null}),le())},i(s){l||(D(t),l=!0)},o(s){$(t),l=!1},d(s){s&&i(e),t&&t.d()}}}function be(r,e,l){let{sdp:t}=e;return r.$$set=s=>{"sdp"in s&&l(0,t=s.sdp)},[t]}class Ce extends V{constructor(e){super();A(this,e,be,ge,M,{sdp:0})}}const Ie={iceServers:[{urls:"stun:stun1.l.google.com:19302"}]};export{ye as C,Ie as I,Ce as S,Ee as a};
