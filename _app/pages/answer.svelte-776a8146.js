import{S as j,i as A,s as R,e as $,c as w,a as v,d as u,b as C,f as h,n as _,o as q,p,u as E,m as L,v as d,w as b,x as k,A as g,J as y,t as x,j as z,k as S,g as D,l as I,H as M,K as N,I as f}from"../chunks/vendor-0fb0a8b3.js";import{R as Q,C as T,S as U,Q as H}from"../chunks/rtcController-7aeda4c3.js";/* empty css                                                   */function J(l){let t,n;return t=new T({props:{channel:l[0].channel}}),{c(){d(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,a){k(t,e,a),n=!0},p(e,a){const c={};a&1&&(c.channel=e[0].channel),t.$set(c)},i(e){n||(p(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){g(t,e)}}}function K(l){let t,n,e,a,c,i,o={ctx:l,current:null,token:null,hasCatch:!1,pending:F,then:B,catch:P,value:3,blocks:[,,,]};return y(c=l[2],o),{c(){t=$("p"),n=x("Let the other User scan this Code"),e=z(),a=S(),o.block.c(),this.h()},l(r){t=w(r,"P",{class:!0});var s=v(t);n=D(s,"Let the other User scan this Code"),s.forEach(u),e=I(r),a=S(),o.block.l(r),this.h()},h(){C(t,"class","svelte-xbt0zw")},m(r,s){h(r,t,s),M(t,n),h(r,e,s),h(r,a,s),o.block.m(r,o.anchor=s),o.mount=()=>a.parentNode,o.anchor=a,i=!0},p(r,s){l=r,o.ctx=l,s&4&&c!==(c=l[2])&&y(c,o)||N(o,l,s)},i(r){i||(p(o.block),i=!0)},o(r){for(let s=0;s<3;s+=1){const m=o.blocks[s];_(m)}i=!1},d(r){r&&u(t),r&&u(e),r&&u(a),o.block.d(r),o.token=null,o=null}}}function O(l){let t,n;return t=new U({props:{type:"answer"}}),{c(){d(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,a){k(t,e,a),n=!0},p:f,i(e){n||(p(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){g(t,e)}}}function P(l){return{c:f,l:f,m:f,p:f,i:f,o:f,d:f}}function B(l){let t,n;return t=new H({props:{data:l[3]}}),{c(){d(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,a){k(t,e,a),n=!0},p(e,a){const c={};a&4&&(c.data=e[3]),t.$set(c)},i(e){n||(p(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){g(t,e)}}}function F(l){return{c:f,l:f,m:f,p:f,i:f,o:f,d:f}}function G(l){let t,n,e,a;const c=[O,K,J],i=[];function o(r,s){return r[1]==="scanning"?0:r[1]==="offering"?1:r[1]==="chatting"?2:-1}return~(n=o(l))&&(e=i[n]=c[n](l)),{c(){t=$("main"),e&&e.c(),this.h()},l(r){t=w(r,"MAIN",{class:!0});var s=v(t);e&&e.l(s),s.forEach(u),this.h()},h(){C(t,"class","svelte-xbt0zw")},m(r,s){h(r,t,s),~n&&i[n].m(t,null),a=!0},p(r,[s]){let m=n;n=o(r),n===m?~n&&i[n].p(r,s):(e&&(L(),_(i[m],1,1,()=>{i[m]=null}),q()),~n?(e=i[n],e?e.p(r,s):(e=i[n]=c[n](r),e.c()),p(e,1),e.m(t,null)):e=null)},i(r){a||(p(e),a=!0)},o(r){_(e),a=!1},d(r){r&&u(t),~n&&i[n].d()}}}function V(l,t,n){let e,a="scanning",c;return E(()=>{addEventListener("scan",async i=>{n(1,a="offering");const o=i.detail.sdp;n(0,e=new Q),n(0,e.onOpen=()=>n(1,a="chatting"),e),n(0,e.onClose=()=>location.href="https://phibr0.de/webRTC-Demo",e),e.setRemoteDescription(o),n(2,c=e.generateAnswer(1e3))})}),[e,a,c]}class Z extends j{constructor(t){super();A(this,t,V,G,R,{})}}export{Z as default};
