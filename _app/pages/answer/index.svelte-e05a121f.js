import{S as N,i as R,s as j,e as w,c as C,a as v,d as p,b as y,f as m,n as _,o as I,p as f,u as q,m as S,R as L,v as b,w as k,x as g,A as $,k as h,J as A,K as z,t as D,j as M,g as O,l as Q,H as T,I as i}from"../../chunks/vendor-2fef0dfb.js";import{I as U,C as F,S as G,Q as H}from"../../chunks/static-86b88e3a.js";function J(c){let t,n;return t=new F({props:{channel:c[0].channel}}),{c(){b(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,r){g(t,e,r),n=!0},p(e,r){const l={};r&1&&(l.channel=e[0].channel),t.$set(l)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){$(t,e)}}}function K(c){let t,n,e,r,l,a=c[2]&&E(c);return{c(){t=w("p"),n=D("Let the other User scan this Code"),e=M(),a&&a.c(),r=h(),this.h()},l(o){t=C(o,"P",{class:!0});var s=v(t);n=O(s,"Let the other User scan this Code"),s.forEach(p),e=Q(o),a&&a.l(o),r=h(),this.h()},h(){y(t,"class","svelte-xbt0zw")},m(o,s){m(o,t,s),T(t,n),m(o,e,s),a&&a.m(o,s),m(o,r,s),l=!0},p(o,s){o[2]?a?(a.p(o,s),s&4&&f(a,1)):(a=E(o),a.c(),f(a,1),a.m(r.parentNode,r)):a&&(S(),_(a,1,1,()=>{a=null}),I())},i(o){l||(f(a),l=!0)},o(o){_(a),l=!1},d(o){o&&p(t),o&&p(e),a&&a.d(o),o&&p(r)}}}function P(c){let t,n;return t=new G({}),{c(){b(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,r){g(t,e,r),n=!0},p:i,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){$(t,e)}}}function E(c){let t,n,e,r={ctx:c,current:null,token:null,hasCatch:!1,pending:V,then:B,catch:x,value:3,blocks:[,,,]};return A(n=c[2],r),{c(){t=h(),r.block.c()},l(l){t=h(),r.block.l(l)},m(l,a){m(l,t,a),r.block.m(l,r.anchor=a),r.mount=()=>t.parentNode,r.anchor=t,e=!0},p(l,a){c=l,r.ctx=c,a&4&&n!==(n=c[2])&&A(n,r)||z(r,c,a)},i(l){e||(f(r.block),e=!0)},o(l){for(let a=0;a<3;a+=1){const o=r.blocks[a];_(o)}e=!1},d(l){l&&p(t),r.block.d(l),r.token=null,r=null}}}function x(c){return{c:i,l:i,m:i,p:i,i,o:i,d:i}}function B(c){let t,n;return t=new H({props:{data:c[3].sdp}}),{c(){b(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,r){g(t,e,r),n=!0},p(e,r){const l={};r&4&&(l.data=e[3].sdp),t.$set(l)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){$(t,e)}}}function V(c){return{c:i,l:i,m:i,p:i,i,o:i,d:i}}function W(c){let t,n,e,r;const l=[P,K,J],a=[];function o(s,u){return s[1]==="scanning"?0:s[1]==="offering"?1:s[1]==="chatting"?2:-1}return~(n=o(c))&&(e=a[n]=l[n](c)),{c(){t=w("main"),e&&e.c(),this.h()},l(s){t=C(s,"MAIN",{class:!0});var u=v(t);e&&e.l(u),u.forEach(p),this.h()},h(){y(t,"class","svelte-xbt0zw")},m(s,u){m(s,t,u),~n&&a[n].m(t,null),r=!0},p(s,[u]){let d=n;n=o(s),n===d?~n&&a[n].p(s,u):(e&&(S(),_(a[d],1,1,()=>{a[d]=null}),I()),~n?(e=a[n],e?e.p(s,u):(e=a[n]=l[n](s),e.c()),f(e,1),e.m(t,null)):e=null)},i(s){r||(f(e),r=!0)},o(s){_(e),r=!1},d(s){s&&p(t),~n&&a[n].d()}}}function X(c,t,n){let e,r="scanning",l;return q(()=>{addEventListener("scan",async a=>{n(1,r="offering");const o={type:"offer",sdp:a.detail.data};console.log(o),n(0,e=new L(U,"answer",!0)),n(0,e.onOpen=()=>n(1,r="chatting"),e),n(0,e.onClose=()=>location.href="https://phibr0.de/webRTC-Demo",e),await e.setRemoteDescription(o),n(2,l=e.generateAnswer(1e3))})}),[e,r,l]}class ee extends N{constructor(t){super();R(this,t,X,W,j,{})}}export{ee as default};
