import{S as R,i as j,s as A,e as $,c as w,a as C,d as u,b as v,f as h,n as p,o as q,p as _,u as D,m as E,v as d,w as b,x as k,A as g,J as y,t as L,j as T,k as S,g as x,l as z,H as I,K as M,I as f}from"../chunks/vendor-0fb0a8b3.js";import{R as N,C as Q,S as U,Q as H}from"../chunks/rtcController-7aeda4c3.js";/* empty css                                                   */function J(l){let t,n;return t=new Q({props:{channel:l[0].channel}}),{c(){d(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,s){k(t,e,s),n=!0},p(e,s){const c={};s&1&&(c.channel=e[0].channel),t.$set(c)},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){p(t.$$.fragment,e),n=!1},d(e){g(t,e)}}}function K(l){let t,n,e,s,c,i,o={ctx:l,current:null,token:null,hasCatch:!1,pending:F,then:B,catch:P,value:3,blocks:[,,,]};return y(c=l[2],o),{c(){t=$("p"),n=L("Let the other User scan this Code"),e=T(),s=S(),o.block.c(),this.h()},l(r){t=w(r,"P",{class:!0});var a=C(t);n=x(a,"Let the other User scan this Code"),a.forEach(u),e=z(r),s=S(),o.block.l(r),this.h()},h(){v(t,"class","svelte-xbt0zw")},m(r,a){h(r,t,a),I(t,n),h(r,e,a),h(r,s,a),o.block.m(r,o.anchor=a),o.mount=()=>s.parentNode,o.anchor=s,i=!0},p(r,a){l=r,o.ctx=l,a&4&&c!==(c=l[2])&&y(c,o)||M(o,l,a)},i(r){i||(_(o.block),i=!0)},o(r){for(let a=0;a<3;a+=1){const m=o.blocks[a];p(m)}i=!1},d(r){r&&u(t),r&&u(e),r&&u(s),o.block.d(r),o.token=null,o=null}}}function O(l){let t,n;return t=new U({props:{type:"answer"}}),{c(){d(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,s){k(t,e,s),n=!0},p:f,i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){p(t.$$.fragment,e),n=!1},d(e){g(t,e)}}}function P(l){return{c:f,l:f,m:f,p:f,i:f,o:f,d:f}}function B(l){let t,n;return t=new H({props:{data:l[3]}}),{c(){d(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,s){k(t,e,s),n=!0},p(e,s){const c={};s&4&&(c.data=e[3]),t.$set(c)},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){p(t.$$.fragment,e),n=!1},d(e){g(t,e)}}}function F(l){return{c:f,l:f,m:f,p:f,i:f,o:f,d:f}}function G(l){let t,n,e,s;const c=[O,K,J],i=[];function o(r,a){return r[1]==="scanning"?0:r[1]==="offering"?1:r[1]==="chatting"?2:-1}return~(n=o(l))&&(e=i[n]=c[n](l)),{c(){t=$("main"),e&&e.c(),this.h()},l(r){t=w(r,"MAIN",{class:!0});var a=C(t);e&&e.l(a),a.forEach(u),this.h()},h(){v(t,"class","svelte-xbt0zw")},m(r,a){h(r,t,a),~n&&i[n].m(t,null),s=!0},p(r,[a]){let m=n;n=o(r),n===m?~n&&i[n].p(r,a):(e&&(E(),p(i[m],1,1,()=>{i[m]=null}),q()),~n?(e=i[n],e?e.p(r,a):(e=i[n]=c[n](r),e.c()),_(e,1),e.m(t,null)):e=null)},i(r){s||(_(e),s=!0)},o(r){p(e),s=!1},d(r){r&&u(t),~n&&i[n].d()}}}function V(l,t,n){let e,s="scanning",c;return D(()=>{addEventListener("scan",async i=>{n(1,s="offering");const o=i.detail.sdp;n(0,e=new N),n(0,e.onOpen=()=>n(1,s="chatting"),e),n(0,e.onClose=()=>location.href="https://phibr0.de/webRTC-Demo",e),e.setRemoteDescription(new RTCSessionDescription({type:"offer",sdp:o})),n(2,c=e.generateAnswer(1e3))})}),[e,s,c]}class Z extends R{constructor(t){super();j(this,t,V,G,A,{})}}export{Z as default};
