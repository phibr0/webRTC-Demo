import{S as A,i as I,s as N,e as $,c as v,a as C,d as h,b as y,f as b,n as d,o as P,p as k,u as Q,m as T,v as w,w as S,x as j,A as D,I as u,J as E,t as R,j as q,g as L,l as M,H as O,M as U,K as H}from"../chunks/vendor-0fb0a8b3.js";import{R as J,C as K,S as z,Q as B}from"../chunks/rtcController-c31f62a7.js";/* empty css                                                   */function F(a){let t,n;return t=new K({props:{channel:a[0].channel}}),{c(){w(t.$$.fragment)},l(e){S(t.$$.fragment,e)},m(e,r){j(t,e,r),n=!0},p(e,r){const o={};r&1&&(o.channel=e[0].channel),t.$set(o)},i(e){n||(k(t.$$.fragment,e),n=!0)},o(e){d(t.$$.fragment,e),n=!1},d(e){D(t,e)}}}function G(a){let t,n;return t=new z({props:{type:"answer"}}),{c(){w(t.$$.fragment)},l(e){S(t.$$.fragment,e)},m(e,r){j(t,e,r),n=!0},p:u,i(e){n||(k(t.$$.fragment,e),n=!0)},o(e){d(t.$$.fragment,e),n=!1},d(e){D(t,e)}}}function V(a){let t,n,e,r,o,c,_,s,p,m,i={ctx:a,current:null,token:null,hasCatch:!1,pending:Y,then:X,catch:W,value:4,blocks:[,,,]};return E(r=a[2],i),{c(){t=$("p"),n=R("Let the other User scan this Code"),e=q(),i.block.c(),o=q(),c=$("p"),_=R("Done"),this.h()},l(l){t=v(l,"P",{class:!0});var f=C(t);n=L(f,"Let the other User scan this Code"),f.forEach(h),e=M(l),i.block.l(l),o=M(l),c=v(l,"P",{class:!0});var g=C(c);_=L(g,"Done"),g.forEach(h),this.h()},h(){y(t,"class","svelte-phd96k"),y(c,"class","btn svelte-phd96k")},m(l,f){b(l,t,f),O(t,n),b(l,e,f),i.block.m(l,i.anchor=f),i.mount=()=>o.parentNode,i.anchor=o,b(l,o,f),b(l,c,f),O(c,_),s=!0,p||(m=U(c,"click",a[3]),p=!0)},p(l,f){a=l,i.ctx=a,f&4&&r!==(r=a[2])&&E(r,i)||H(i,a,f)},i(l){s||(k(i.block),s=!0)},o(l){for(let f=0;f<3;f+=1){const g=i.blocks[f];d(g)}s=!1},d(l){l&&h(t),l&&h(e),i.block.d(l),i.token=null,i=null,l&&h(o),l&&h(c),p=!1,m()}}}function W(a){return{c:u,l:u,m:u,p:u,i:u,o:u,d:u}}function X(a){let t,n;return t=new B({props:{data:a[4]}}),{c(){w(t.$$.fragment)},l(e){S(t.$$.fragment,e)},m(e,r){j(t,e,r),n=!0},p(e,r){const o={};r&4&&(o.data=e[4]),t.$set(o)},i(e){n||(k(t.$$.fragment,e),n=!0)},o(e){d(t.$$.fragment,e),n=!1},d(e){D(t,e)}}}function Y(a){return{c:u,l:u,m:u,p:u,i:u,o:u,d:u}}function Z(a){let t,n,e,r;const o=[V,G,F],c=[];function _(s,p){return s[1]==="offering"?0:s[1]==="scanning"?1:s[1]==="chatting"?2:-1}return~(n=_(a))&&(e=c[n]=o[n](a)),{c(){t=$("main"),e&&e.c(),this.h()},l(s){t=v(s,"MAIN",{class:!0});var p=C(t);e&&e.l(p),p.forEach(h),this.h()},h(){y(t,"class","svelte-phd96k")},m(s,p){b(s,t,p),~n&&c[n].m(t,null),r=!0},p(s,[p]){let m=n;n=_(s),n===m?~n&&c[n].p(s,p):(e&&(T(),d(c[m],1,1,()=>{c[m]=null}),P()),~n?(e=c[n],e?e.p(s,p):(e=c[n]=o[n](s),e.c()),k(e,1),e.m(t,null)):e=null)},i(s){r||(k(e),r=!0)},o(s){d(e),r=!1},d(s){s&&h(t),~n&&c[n].d()}}}function x(a,t,n){let e,r="offering",o;return Q(()=>{addEventListener("scan",async _=>{const s=_.detail.sdp;e.setRemoteDescription({type:"answer",sdp:s})}),n(0,e=new J("offer")),n(0,e.onOpen=()=>n(1,r="chatting"),e),n(0,e.onClose=()=>location.href="https://phibr0.de/webRTC-Demo",e),n(2,o=e.generateOffer(1e3))}),[e,r,o,()=>n(1,r="scanning")]}class re extends A{constructor(t){super();I(this,t,x,Z,N,{})}}export{re as default};
